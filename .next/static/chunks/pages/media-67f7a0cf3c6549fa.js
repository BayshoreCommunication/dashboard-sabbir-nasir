(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{4482:function(e,i,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/media",function(){return a(8409)}])},8409:function(e,i,a){"use strict";a.r(i),a.d(i,{default:function(){return _}});var t=a(5893),l=a(7294),s=a(5667),d=a(2175),r=a(4712),n=a(1238),c=a(9463),x=a(5623),m=a(1574),o=a(8851),u=function(e){let{id:i,imageTitle:a,altText:l,setImageTitleState:s}=e,{mutate:u,isPending:h}=(0,n.Z)({path:"/media/edit/".concat(i),revalidate:"/media"});return(0,t.jsx)("div",{children:(0,t.jsx)(d.J9,{initialValues:{imageTitle:a||"",altText:l||""},onSubmit:e=>{u(e,{onSuccess:()=>{r.A.success("Image details changed"),s(e.imageTitle)}})},enableReinitialize:!0,children:e=>{let{isSubmitting:i}=e;return(0,t.jsxs)(d.l0,{className:"space-y-5",children:[(0,t.jsx)(x.U,{label:"Image Title:",placeholder:"Your text here",name:"imageTitle",type:"text",required:!0}),(0,t.jsx)(m.X,{label:"Alt Text",placeholder:"Your text here",name:"altText",required:!0}),(0,t.jsxs)("div",{className:"mt-5 flex items-center gap-3",children:[(0,t.jsx)(c.Z,{type:"submit",className:"px-8",disabled:h,children:"Save"}),h&&(0,t.jsx)(o.$,{className:"border-gray-400 border-r-gray-400/30 border-b-gray-400/30"})]})]})}})})};let h=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});var p=a(6159),g=function(e){let{selectedImage:i}=e,a=(0,l.useRef)(),[s,d]=(0,l.useState)(null),[r,n]=(0,l.useState)(i.imageTitle);return(0,t.jsxs)(p.x,{className:"h-screen w-[400px] 2xl:w-[625px]",children:[(0,t.jsxs)("div",{className:"pt-4 p-5 2xl:p-7 border-b border-gray-300",children:[(0,t.jsx)("p",{className:"text-[20px] font-medium text-gray-600",children:"Image Details"}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-5",children:[(0,t.jsx)("div",{className:"max-w-[200px] 2xl:max-w-[320px] max-h-[380px] overflow-hidden",children:(0,t.jsx)("img",{ref:a,src:i.image.url,alt:i.altText,onLoad:()=>{let{naturalWidth:e,naturalHeight:i}=a.current;d({width:e,height:i})}},i._id)}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 leading-6",children:[(0,t.jsx)("p",{className:"font-semibold",children:r}),(0,t.jsx)("p",{children:h(i.createdAt)}),(0,t.jsxs)("p",{children:[null==s?void 0:s.width," x ",null==s?void 0:s.height]})]})]})]}),(0,t.jsx)("div",{className:"p-5 2xl:p-7 pb-[140px] w-[80%]",children:(0,t.jsx)(u,{id:i._id,imageTitle:i.imageTitle,altText:i.altText,setImageTitleState:n},i._id)})]})},j=a(5675),b=a.n(j),f=a(9993),v=function(e){let{media:i,selectedId:a,handleImageClick:l}=e;return(0,t.jsxs)("div",{className:"relative size-[180px] 2xl:size-[282px] rounded-md overflow-hidden cursor-pointer",onClick:()=>l(i),children:[(0,t.jsx)(b(),{src:i.image.url,alt:i.altText,sizes:"282px",fill:!0,className:"object-cover  border border-gray-200 rounded-md"}),a===i._id&&(0,t.jsx)("div",{className:"absolute inset-0 border-[6px] border-cyan-400 rounded-md",children:(0,t.jsx)("div",{className:"absolute top-0 right-0 size-6 flex justify-center items-center bg-cyan-400 border border-white text-white",children:(0,t.jsx)(f.CD,{})})})]})},N=a(1087),y=a(6256),_=function(){let[e,i]=(0,l.useState)(null),{data:a,isPending:d}=(0,y.Z)({path:"/media"}),c=a=>{(null==e?void 0:e._id)===a._id?i(null):i(a)},[x,m]=(0,l.useState)(!1),{mutate:o,isPending:u}=(0,n.Z)({path:"/media",revalidate:"/media"});return(0,t.jsx)(s.Z,{title:"Media",description:"media",heading:"All Media",isLoading:d,children:(0,t.jsxs)("div",{className:"mt-5 border border-gray-300 rounded-xl flex min-h-[420px] 2xl:min-h-[700px]",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-5 2xl:gap-7 p-5 2xl:p-7",children:[(0,t.jsx)(N.Z,{handleImageSubmit:(e,i)=>{o(e,{onSuccess:()=>{r.A.success("Media added"),i.resetForm()},onSettled:()=>{m(!1)}})},showImageModal:x,setShowImageModal:m,imageSubmitting:u,children:(0,t.jsx)("button",{type:"button",className:"size-[180px] 2xl:size-[280px] rounded-md border-gray-400 bg-gray-100 flex justify-center items-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[(0,t.jsx)("span",{children:(0,t.jsx)(f._t,{})}),(0,t.jsx)("p",{children:"Upload Image"})]})})}),null==a?void 0:a.media.map(i=>(0,t.jsx)(v,{media:i,selectedId:null==e?void 0:e._id,handleImageClick:c},i._id))]}),e&&(0,t.jsx)("div",{className:"sticky top-0 border-l border-gray-300",children:(0,t.jsx)(g,{selectedImage:e},e._id)})]})})}}},function(e){e.O(0,[914,175,194,342,984,774,888,179],function(){return e(e.s=4482)}),_N_E=e.O()}]);
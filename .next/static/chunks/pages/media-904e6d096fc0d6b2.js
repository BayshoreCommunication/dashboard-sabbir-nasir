(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{4482:function(e,i,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/media",function(){return a(8409)}])},8409:function(e,i,a){"use strict";a.r(i),a.d(i,{default:function(){return y}});var t=a(5893),l=a(7294),s=a(5667);let d=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});var r=a(5675),n=a.n(r),c=a(6159),x=a(2175),m=a(4712),o=a(1238),u=a(9463),h=a(5623),p=a(1574),g=a(8851),j=function(e){let{id:i,imageTitle:a,altText:l,setImageTitleState:s}=e,{mutate:d,isPending:r}=(0,o.Z)({path:"/media/edit/".concat(i),revalidate:"/media"});return(0,t.jsx)("div",{children:(0,t.jsx)(x.J9,{initialValues:{imageTitle:a||"",altText:l||""},onSubmit:e=>{d(e,{onSuccess:()=>{m.A.success("Image details changed"),s(e.imageTitle)}})},enableReinitialize:!0,children:e=>{let{isSubmitting:i}=e;return(0,t.jsxs)(x.l0,{className:"space-y-5",children:[(0,t.jsx)(h.U,{label:"Image Title:",placeholder:"Your text here",name:"imageTitle",type:"text",required:!0}),(0,t.jsx)(p.X,{label:"Alt Text",placeholder:"Your text here",name:"altText",required:!0}),(0,t.jsxs)("div",{className:"mt-5 flex items-center gap-3",children:[(0,t.jsx)(u.Z,{type:"submit",className:"px-8",disabled:r,children:"Save"}),r&&(0,t.jsx)(g.$,{className:"border-gray-400 border-r-gray-400/30 border-b-gray-400/30"})]})]})}})})},b=function(e){let{selectedImage:i}=e,a=(0,l.useRef)(),[s,r]=(0,l.useState)(null),[x,m]=(0,l.useState)(i.imageTitle);return(0,t.jsxs)(c.x,{className:"h-screen w-[400px] 2xl:w-[625px]",children:[(0,t.jsxs)("div",{className:"pt-4 p-5 2xl:p-7 border-b border-gray-300",children:[(0,t.jsx)("p",{className:"text-[20px] font-medium text-gray-600",children:"Image Details"}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-5",children:[(0,t.jsx)("div",{className:"max-w-[200px] 2xl:max-w-[320px] max-h-[380px] overflow-hidden",children:(0,t.jsx)(n(),{ref:a,src:i.image.url,alt:i.altText,width:200,height:200,onLoad:()=>{let{naturalWidth:e,naturalHeight:i}=a.current;r({width:e,height:i})},className:"w-full h-auto"},i._id)}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 leading-6",children:[(0,t.jsx)("p",{className:"font-semibold",children:x}),(0,t.jsx)("p",{children:d(i.createdAt)}),(0,t.jsxs)("p",{children:[null==s?void 0:s.width," x ",null==s?void 0:s.height]})]})]})]}),(0,t.jsx)("div",{className:"p-5 2xl:p-7 pb-[140px] w-[80%]",children:(0,t.jsx)(j,{id:i._id,imageTitle:i.imageTitle,altText:i.altText,setImageTitleState:m},i._id)})]})},f=a(9993),v=function(e){let{media:i,selectedId:a,handleImageClick:l}=e;return(0,t.jsxs)("div",{className:"relative size-[180px] 2xl:size-[282px] rounded-md overflow-hidden cursor-pointer",onClick:()=>l(i),children:[(0,t.jsx)(n(),{src:i.image.url,alt:i.altText,sizes:"282px",fill:!0,className:"object-cover  border border-gray-200 rounded-md"}),a===i._id&&(0,t.jsx)("div",{className:"absolute inset-0 border-[6px] border-cyan-400 rounded-md",children:(0,t.jsx)("div",{className:"absolute top-0 right-0 size-6 flex justify-center items-center bg-cyan-400 border border-white text-white",children:(0,t.jsx)(f.CD,{})})})]})},N=a(1087),w=a(6256),y=function(){let[e,i]=(0,l.useState)(null),{data:a,isPending:d}=(0,w.Z)({path:"/media"}),r=a=>{(null==e?void 0:e._id)===a._id?i(null):i(a)},[n,c]=(0,l.useState)(!1),{mutate:x,isPending:u}=(0,o.Z)({path:"/media",revalidate:"/media"});return(0,t.jsx)(s.Z,{title:"Media",description:"media",heading:"All Media",isLoading:d,children:(0,t.jsxs)("div",{className:"mt-5 border border-gray-300 rounded-xl flex min-h-[420px] 2xl:min-h-[700px]",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-5 2xl:gap-7 p-5 2xl:p-7",children:[(0,t.jsx)(N.Z,{handleImageSubmit:(e,i)=>{x(e,{onSuccess:()=>{m.A.success("Media added"),i.resetForm()},onSettled:()=>{c(!1)}})},showImageModal:n,setShowImageModal:c,imageSubmitting:u,children:(0,t.jsx)("button",{type:"button",className:"size-[180px] 2xl:size-[280px] rounded-md border-gray-400 bg-gray-100 flex justify-center items-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[(0,t.jsx)("span",{children:(0,t.jsx)(f._t,{})}),(0,t.jsx)("p",{children:"Upload Image"})]})})}),null==a?void 0:a.media.map(i=>(0,t.jsx)(v,{media:i,selectedId:null==e?void 0:e._id,handleImageClick:r},i._id))]}),e&&(0,t.jsx)("div",{className:"sticky top-0 border-l border-gray-300",children:(0,t.jsx)(b,{selectedImage:e},e._id)})]})})}}},function(e){e.O(0,[914,175,194,342,984,774,888,179],function(){return e(e.s=4482)}),_N_E=e.O()}]);